<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revelti - Galleries Overview</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100 antialiased text-gray-800 pt-8">
    
    <!-- Organizer-specific Navbar -->
    <div id="organizer-navbar-placeholder"></div>

    <div class="max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Header Section -->
        <header class="mb-8">
            <nav class="text-sm mb-2" aria-label="Breadcrumb">
                <ol class="list-none p-0 inline-flex">
                    <li class="flex items-center">
                        <a href="organizerDashboard.html" class="text-gray-500 hover:text-revelti-blue">Organizer Dashboard</a>
                        <svg class="fill-current w-3 h-3 mx-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569 9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg>
                    </li>
                    <li>
                        <span class="text-gray-700 font-semibold">Galleries Overview</span>
                    </li>
                </ol>
            </nav>
            <h1 class="text-3xl font-extrabold revelti-blue">Galleries Overview</h1>
        </header>
        
        <!-- Key Metric Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="bg-white p-6 rounded-lg shadow-md border">
                <h3 class="text-base font-semibold text-gray-500 uppercase tracking-wider">Total Media Files</h3>
                <p id="total-media" class="text-5xl font-extrabold revelti-blue mt-2">0</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md border">
                <h3 class="text-base font-semibold text-gray-500 uppercase tracking-wider">Pending Approval</h3>
                <p id="pending-approval" class="text-5xl font-extrabold revelti-orange mt-2">0</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md border">
                <h3 class="text-base font-semibold text-gray-500 uppercase tracking-wider">Scheduled Galleries</h3>
                <p id="scheduled-galleries" class="text-5xl font-extrabold revelti-blue mt-2">0</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md border">
                <h3 class="text-base font-semibold text-gray-500 uppercase tracking-wider">Storage Used</h3>
                <div class="w-full bg-gray-200 rounded-full h-4 mt-4">
                    <div class="bg-revelti-blue h-4 rounded-full" style="width: 45%;"></div>
                </div>
                <p class="text-sm text-gray-500 text-right mt-1">450 GB / 1 TB</p>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
            <div class="p-6">
                <!-- Controls & Filters -->
                <div class="flex flex-col md:flex-row items-center justify-between mb-6">
                    <div class="relative w-full md:w-1/3 mb-4 md:mb-0">
                        <input type="text" id="search-input" placeholder="Search by event name..." class="w-full p-3 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-revelti-blue">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                        </div>
                    </div>
                    <div id="gallery-filters" class="flex flex-wrap justify-center space-x-2">
                        <button onclick="filterEvents('all')" class="filter-btn px-4 py-2 text-sm font-semibold bg-revelti-blue text-white rounded-lg">All</button>
                        <button onclick="filterEvents('Pending Approval')" class="filter-btn px-4 py-2 text-sm font-semibold bg-gray-200 text-gray-700 rounded-lg">Needs Approval</button>
                        <button onclick="filterEvents('Private')" class="filter-btn px-4 py-2 text-sm font-semibold bg-gray-200 text-gray-700 rounded-lg">Has Private</button>
                        <button onclick="filterEvents('Scheduled')" class="filter-btn px-4 py-2 text-sm font-semibold bg-gray-200 text-gray-700 rounded-lg">Has Scheduled</button>
                    </div>
                </div>

                <!-- Event Cards Grid -->
                <div id="event-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Event cards will be injected by JS -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- MOCK DATA ---
        const allEventsData = [
            {
                id: 1, name: 'Sensuality & Essentiality', date: 'Nov 1-2, 2025',
                creators: [
                    { name: 'AMedia', avatar: 'https://placehold.co/80x80/f58220/ffffff?text=A' },
                    { name: 'Lutty Moreira', avatar: 'https://placehold.co/80x80/f58220/ffffff?text=LM' }
                ],
                galleries: [
                    { status: 'Public', photos: 125, videos: 10 },
                    { status: 'Public', photos: 50, videos: 0 },
                    { status: 'Pending Approval', photos: 0, videos: 0 },
                    { status: 'Scheduled', photos: 180, videos: 5 }
                ],
                link: 'mediaManagement.html'
            },
            {
                id: 2, name: 'BCN Zouk Congress', date: 'Dec 5-8, 2025',
                creators: [ { name: 'AMedia', avatar: 'https://placehold.co/80x80/f58220/ffffff?text=A' } ],
                galleries: [
                    { status: 'Private', photos: 300, videos: 20 },
                    { status: 'Private', photos: 150, videos: 12 }
                ],
                link: '#'
            },
            {
                id: 3, name: 'Summer Fest 2024', date: 'Jul 15-17, 2024',
                creators: [ { name: 'Visuals Pro', avatar: 'https://placehold.co/80x80/cccccc/ffffff?text=V' } ],
                galleries: [
                    { status: 'Public', photos: 450, videos: 25 }
                ],
                link: '#'
            }
        ];

        // --- UTILITY FUNCTIONS ---
        const getStatusBadge = (status) => {
            switch (status) {
                case 'Public': return `<span class="text-xs font-bold bg-green-100 text-green-800 px-2 py-1 rounded-full whitespace-nowrap">${status}</span>`;
                case 'Private': return `<span class="text-xs font-bold bg-gray-200 text-gray-800 px-2 py-1 rounded-full whitespace-nowrap">${status}</span>`;
                case 'Scheduled': return `<span class="text-xs font-bold bg-blue-100 text-blue-800 px-2 py-1 rounded-full whitespace-nowrap">${status}</span>`;
                case 'Pending Approval': return `<span class="text-xs font-bold bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full whitespace-nowrap">${status}</span>`;
                default: return '';
            }
        };

        // --- RENDER FUNCTIONS ---
        function renderGrid(filter = 'all') {
            const grid = document.getElementById('event-grid');
            const searchFilter = document.getElementById('search-input').value.toLowerCase();
            grid.innerHTML = '';

            const filteredData = allEventsData.filter(event => {
                const nameMatch = event.name.toLowerCase().includes(searchFilter);
                const statusMatch = filter === 'all' || event.galleries.some(g => g.status === filter);
                return nameMatch && statusMatch;
            });

            if (filteredData.length === 0) {
                grid.innerHTML = '<p class="text-gray-500 col-span-full text-center py-8">No events found.</p>';
                return;
            }

            filteredData.forEach(event => {
                const card = document.createElement('div');
                card.className = 'event-card bg-white rounded-lg shadow-md overflow-hidden border border-gray-200 flex flex-col';
                
                const totalPhotos = event.galleries.reduce((sum, g) => sum + g.photos, 0);
                const totalVideos = event.galleries.reduce((sum, g) => sum + g.videos, 0);
                
                const statusSet = new Set(event.galleries.map(g => g.status));
                const statusBadges = Array.from(statusSet).map(status => getStatusBadge(status)).join('');

                const creatorAvatars = event.creators.map(c => 
                    `<div class="flex items-center space-x-2">
                        <img class="w-8 h-8 rounded-full border-2 border-white" src="${c.avatar}" alt="${c.name}" title="${c.name}">
                        <span class="text-xs font-semibold text-gray-700">${c.name}</span>
                    </div>`
                ).join('');

                card.innerHTML = `
                    <div class="p-4 flex-grow">
                        <h4 class="font-bold text-lg revelti-blue">${event.name}</h4>
                        <p class="text-sm text-gray-500 mt-1">${event.date}</p>
                        <div class="flex flex-wrap gap-2 my-3">${statusBadges}</div>
                        <div class="text-sm text-gray-700">
                            <p><strong>${event.galleries.length}</strong> Galleries</p>
                            <p><strong>${totalPhotos}</strong> Photos / <strong>${totalVideos}</strong> Videos</p>
                        </div>
                    </div>
                    <div class="p-4 border-t bg-gray-50 flex flex-col items-start space-y-3">
                        <div class="flex flex-wrap gap-x-4 gap-y-2 items-center">${creatorAvatars}</div>
                        <a href="${event.link}" class="w-full text-center px-4 py-2 text-sm font-bold bg-revelti-blue text-white rounded-lg hover:bg-blue-800">View Event Media</a>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function updateMetrics() {
            let totalMedia = 0;
            let pendingApproval = 0;
            let scheduled = 0;

            allEventsData.forEach(event => {
                event.galleries.forEach(gallery => {
                    totalMedia += gallery.photos + gallery.videos;
                    if (gallery.status === 'Pending Approval') pendingApproval++;
                    if (gallery.status === 'Scheduled') scheduled++;
                });
            });

            document.getElementById('total-media').textContent = totalMedia.toLocaleString();
            document.getElementById('pending-approval').textContent = pendingApproval;
            document.getElementById('scheduled-galleries').textContent = scheduled;
        }

        // --- FILTERING LOGIC ---
        const filterButtons = document.querySelectorAll('.filter-btn');
        let currentFilter = 'all';

        function filterEvents(status) {
            currentFilter = status;
            // Update button styles
            filterButtons.forEach(button => {
                if (button.getAttribute('onclick') === `filterEvents('${status}')`) {
                    button.classList.add('bg-revelti-blue', 'text-white');
                    button.classList.remove('bg-gray-200', 'text-gray-700');
                } else {
                    button.classList.add('bg-gray-200', 'text-gray-700');
                    button.classList.remove('bg-revelti-blue', 'text-white');
                }
            });
            renderGrid(currentFilter);
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            updateMetrics();
            renderGrid();
            document.getElementById('search-input').addEventListener('input', () => renderGrid(currentFilter));
        });
    </script>
    <script src="organizer.js" defer></script>
</body>
</html>
