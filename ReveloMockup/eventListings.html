<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revelo - Event Listings</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Nunito -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>
<body class="antialiased text-gray-800">
    <div id="navbar-placeholder"></div>

    <!-- Main container with a max-width for larger screens -->
    <div class="max-w-2xl mx-auto bg-white shadow-lg overflow-hidden">

        <!-- Header Section with Search and Filters -->
        <header class="p-6">
            <h1 class="text-3xl font-extrabold revelo-blue mb-4">Find your next event</h1>
            
            <!-- Search Bar -->
            <div class="relative">
                <input type="text" placeholder="Search by name, artist, city..." class="w-full p-3 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-revelo-orange">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
            </div>

            <!-- Filters Button -->
            <div class="mt-4">
                <button id="open-filter-modal-btn" class="w-full flex items-center justify-center bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 transition duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-5 h-5 mr-2">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75" />
					</svg>
                    Filters
                </button>
            </div>
        </header>

        <!-- Main Content: Event Listings -->
        <main class="bg-gray-50 p-6">
            <!-- Order Picker -->
            <div class="flex justify-end items-center mb-4">
                <label for="order-picker" class="text-sm font-semibold text-gray-600 mr-2">Order by:</label>
                <select id="order-picker" class="border border-gray-300 rounded-md p-1 text-sm focus:outline-none focus:ring-1 focus:ring-revelo-orange">
                    <option value="relevance">Relevance</option>
                    <option value="date">Dates</option>
                    <option value="alphabetical">Alphabetical</option>
                    <option value="rating">Rating</option>
                </select>
            </div>

            <!-- Event Grid Container -->
            <div id="event-grid" class="space-y-4">
                <!-- Event cards will be dynamically sorted and placed here by JavaScript -->
            </div>
        </main>
    </div>

    <!-- Event Card Template (hidden) -->
    <template id="event-card-template">
        <div class="event-card bg-white rounded-lg shadow-md overflow-hidden border border-gray-200">
            <div class="relative">
                <img class="w-full h-40 object-cover">
                <div class="absolute top-2 right-2 flex space-x-1">
                    <button class="p-1.5 bg-white/80 rounded-full text-gray-600 hover:text-revelo-orange"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path></svg></button>
                    <button class="p-1.5 bg-white/80 rounded-full text-gray-600 hover:text-revelo-orange"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg></button>
                </div>
            </div>
            <div class="p-4">
                <h4 class="font-bold text-md revelo-blue truncate"></h4>
                <p class="text-sm text-gray-500"></p>
                <div class="flex justify-between items-center mt-2">
                    <div class="rating-container flex items-center"></div>
                    <div class="tag-container"></div>
                </div>
            </div>
        </div>
    </template>
    
    <!-- Filter Modal -->
    <div id="filter-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-sm" id="filter-modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold revelo-blue">Filter Events</h3>
                <button id="close-filter-modal" class="text-gray-500 hover:text-gray-800 text-3xl leading-none">&times;</button>
            </div>
            <div class="space-y-4">
                <div><h4 class="font-bold text-gray-700 mb-2">Location</h4><input type="text" placeholder="Enter a city..." class="w-full p-2 border border-gray-300 rounded-md"></div>
                <div><h4 class="font-bold text-gray-700 mb-2">Style</h4><input type="text" placeholder="Enter a dance style..." class="w-full p-2 border border-gray-300 rounded-md"></div>
                <div><h4 class="font-bold text-gray-700 mb-2">Dates</h4><div class="space-y-2"><input type="date" class="w-full p-2 border border-gray-300 rounded-md"><input type="date" class="w-full p-2 border border-gray-300 rounded-md"></div></div>
            </div>
            <button id="apply-filters-btn" class="mt-6 w-full bg-revelo-orange text-white font-bold py-2 px-4 rounded-lg">Apply Filters</button>
        </div>
    </div>


    <script>
        // --- Mock Data ---
        const eventsData = [
            { id: 1, name: 'Sensuality & Essentiality', date: '2025-11-01', location: 'Barcelona', rating: 4.8, isFeatured: true, isTrending: true, relevance: 1, poster: 'https://goandance-media-cache-prod.s3.eu-central-1.amazonaws.com/poster_full/event/poster/2025/05/23/6830eaeb459d1543987602.jpg', url: 'eventDetail.html' },
            { id: 2, name: 'Madrid Bachata Masters', date: '2025-10-17', location: 'Madrid', rating: 4.9, isFeatured: true, isTrending: false, relevance: 1, poster: 'https://placehold.co/600x400/f58220/ffffff?text=Featured' },
            { id: 3, name: 'Valencia Salsa Summit', date: '2026-01-20', location: 'Valencia', rating: 4.7, isFeatured: true, isTrending: false, relevance: 1, poster: 'https://placehold.co/600x400/f58220/ffffff?text=Featured' },
            { id: 4, name: 'BCN Bachata Congress', date: '2025-10-10', location: 'Barcelona', rating: 4.6, isFeatured: false, isTrending: true, relevance: 2, poster: 'https://placehold.co/600x400/213c63/ffffff?text=Trending' },
            { id: 5, name: 'Seville Kizomba Immersion', date: '2025-11-20', location: 'Seville', rating: 4.8, isFeatured: false, isTrending: true, relevance: 2, poster: 'https://placehold.co/600x400/213c63/ffffff?text=Trending' },
            { id: 6, name: 'Zaragoza Dance Fest', date: '2025-09-28', location: 'Zaragoza', rating: 4.5, isFeatured: false, isTrending: true, relevance: 2, poster: 'https://placehold.co/600x400/213c63/ffffff?text=Trending' },
            { id: 7, name: 'Salsa Spring Fest', date: '2025-09-05', location: 'Madrid', rating: 4.2, isFeatured: false, isTrending: false, relevance: 3, poster: 'https://placehold.co/600x400/cccccc/ffffff?text=Event' },
            { id: 8, name: 'Kizomba Connection', date: '2025-09-19', location: 'Valencia', rating: 4.4, isFeatured: false, isTrending: false, relevance: 3, poster: 'https://placehold.co/600x400/cccccc/ffffff?text=Event' },
        ];

        const orderPicker = document.getElementById('order-picker');
        const eventGrid = document.getElementById('event-grid');
        const cardTemplate = document.getElementById('event-card-template');
        const filterModal = document.getElementById('filter-modal');
        const filterModalContent = document.getElementById('filter-modal-content');
        const openFilterBtn = document.getElementById('open-filter-modal-btn');
        const closeFilterModalBtn = document.getElementById('close-filter-modal');
        const applyFiltersBtn = document.getElementById('apply-filters-btn');

        // --- Functions ---

        /**
         * Creates a star rating element.
         * @param {number} rating - The rating value (e.g., 4.8).
         * @returns {string} - The HTML string for the star icons.
         */
        function createStarRating(rating) {
            let starsHtml = '';
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5;
            for (let i = 0; i < 5; i++) {
                if (i < fullStars) {
                    starsHtml += `<svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>`;
                } else if (i === fullStars && halfStar) {
                    starsHtml += `<svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292zM10 12.956L12.245 14.5l-.59-2.734 2.09-1.85-2.81-.24L10 7.231V12.956z"></path></svg>`;
                } else {
                    starsHtml += `<svg class="w-4 h-4 text-gray-300" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>`;
                }
            }
            return starsHtml;
        }

        /**
         * Renders the event cards based on the provided sorted data.
         * @param {Array} sortedEvents - The array of event objects to render.
         */
        function renderEvents(sortedEvents) {
            eventGrid.innerHTML = ''; // Clear existing cards
            const grid = document.createElement('div');
            grid.className = 'grid grid-cols-1 sm:grid-cols-2 gap-4';

            sortedEvents.forEach(eventData => {
                const card = cardTemplate.content.cloneNode(true).querySelector('.event-card');
                card.querySelector('img').src = eventData.poster;
                card.querySelector('img').alt = `Poster for ${eventData.name}`;
                card.querySelector('h4').textContent = eventData.name;
                card.querySelector('p').textContent = `${new Date(eventData.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}, ${new Date(eventData.date).getFullYear()} | ${eventData.location}`;
                card.querySelector('.rating-container').innerHTML = createStarRating(eventData.rating);

                if (eventData.isFeatured) {
                    card.querySelector('.tag-container').innerHTML = `<div class="bg-revelo-orange text-white text-xs font-bold px-2 py-1 rounded-md">FEATURED</div>`;
                } else if (eventData.isTrending) {
                     card.querySelector('.tag-container').innerHTML = `<div class="bg-revelo-blue text-white text-xs font-bold px-2 py-1 rounded-md">TRENDING</div>`;
                }

                if (eventData.url) {
                    const link = document.createElement('a');
                    link.href = eventData.url;
                    link.appendChild(card);
                    grid.appendChild(link);
                } else {
                    grid.appendChild(card);
                }
            });
            eventGrid.appendChild(grid);
        }

        /**
         * Sorts and re-renders events based on the selected order.
         */
        function sortAndRender() {
            const sortBy = orderPicker.value;
            let sortedEvents = [...eventsData];

            switch (sortBy) {
                case 'relevance':
                    sortedEvents.sort((a, b) => a.relevance - b.relevance || new Date(a.date) - new Date(b.date) || a.name.localeCompare(b.name));
                    break;
                case 'date':
                    sortedEvents.sort((a, b) => new Date(a.date) - new Date(b.date));
                    break;
                case 'alphabetical':
                    sortedEvents.sort((a, b) => a.name.localeCompare(b.name));
                    break;
                case 'rating':
                    sortedEvents.sort((a, b) => b.rating - a.rating);
                    break;
            }
            renderEvents(sortedEvents);
        }

        // --- Filter Modal Interaction ---
        function openFilterModal() {
            filterModal.classList.remove('hidden');
        }
        function closeFilterModal() {
            filterModal.classList.add('hidden');
        }

        openFilterBtn.addEventListener('click', openFilterModal);
        closeFilterModalBtn.addEventListener('click', closeFilterModal);
        applyFiltersBtn.addEventListener('click', closeFilterModal); // In a real app, this would apply filters
        filterModal.addEventListener('click', (event) => {
            if (!filterModalContent.contains(event.target)) {
                closeFilterModal();
            }
        });


        // --- Initial Load and Event Listeners ---
        orderPicker.addEventListener('change', sortAndRender);
        document.addEventListener('DOMContentLoaded', sortAndRender);

    </script>
    <script src="main.js" defer></script>
</body>
</html>